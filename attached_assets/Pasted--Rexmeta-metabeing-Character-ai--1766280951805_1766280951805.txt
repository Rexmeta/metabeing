아래는 **Rexmeta/metabeing**(현재 “시나리오 + 페르소나 기반 롤플레이 훈련 플랫폼”)을 **Character.ai 형태(유저가 캐릭터를 만들고 공유, 시나리오도 만들고 공유, 다른 사람이 가져다 사용)**로 바꾸기 위한 **가장 경제적/효율적 전환 기획**입니다. 현재 레포가 이미 `personas/`, `scenarios/`, `client/`, `server/`, `shared/` 구조를 갖고 있고(정적 페르소나/시나리오가 존재), “시나리오/MBTI 페르소나/난이도” 중심의 도메인이 잡혀 있으니, 이를 **UGC(사용자 생성 콘텐츠) 플랫폼 스키마 + 탐색/공유 UX + 권한/모더레이션**으로 확장하는 게 최소 변경 경로입니다. ([GitHub][1])

---

## 1) 목표 구조를 한 문장으로 정의

“**캐릭터(페르소나)와 시나리오를 유저가 생성·공유하고, 다른 유저가 ‘조합(캐릭터×시나리오)’해서 대화를 만들고, 대화 로그/평가를 저장하며, 인기/검색/태그로 탐색**하는 UGC 롤플레이 플랫폼.”

---

## 2) “최소 변경” 핵심 원칙 (돈/시간 아끼는 방식)

1. **기존 personas/scenarios 포맷을 유지**하고, DB에는 “메타데이터 + 버전 + 소유권 + 공개범위”만 먼저 얹습니다.
2. 런타임에서는 기존처럼 “대화 엔진이 persona+scenario를 읽어 프롬프트를 구성”하되, **로딩 소스만 파일 → DB(또는 DB + JSON 본문)**으로 바꿉니다.
3. 커뮤니티 기능(좋아요/북마크/리믹스)은 **대화 품질보다 훨씬 먼저 필요**합니다. “만들고 공유하고 가져다 쓰는” 루프를 먼저 완성합니다.

---

## 3) 도메인 모델 (Character.ai 스타일로 바꿀 때 필요한 핵심 엔티티)

### A. 콘텐츠(UGC) 2종: Character / Scenario

* **Character(=Persona)**

  * 이름/한줄소개/설명
  * 시스템 프롬프트(성격, 말투, 금지사항, 지식 범위)
  * 프로필 이미지/커버
  * 태그/카테고리(예: HR, 협상, 연애, 판타지, 역사 등)
  * 공개범위: `private / unlisted / public`
  * 안전 등급/NSFW 플래그(초기엔 단순 플래그 + 신고 기반)
* **Scenario**

  * 배경/목표/역할/제약/첫 메시지(오프너)
  * 권장 난이도/길이/분위기(갈등/감정 강도 등)
  * 태그
  * 공개범위 동일

> 현재 레포가 “시나리오/MBTI 페르소나/난이도”를 이미 전제로 하고 있으니, “훈련 시나리오”에서 “커뮤니티 시나리오”로 확장하면 됩니다. ([GitHub][1])

### B. 조합 실행 단위: Experience(또는 Run/Session Template)

Character.ai에서 사용자는 “캐릭터만” 골라도 대화가 되지만, 당신은 “시나리오 기반” 강점이 있으니:

* **Experience = Character + Scenario (+ 옵션)**

  * 옵션: 난이도, 대화모드(TTS/음성), 평가룰, 금칙어/안전필터
  * 공개 시: “이 조합이 재미있다/유용하다”를 공유 가능(템플릿 공유)

### C. 실제 대화/로그: Conversation + Messages

* Conversation: owner, characterId, scenarioId(또는 experienceId), createdAt, title, visibility(기본 private)
* Message: role(user/assistant/system), content, token usage, emotion score(기존 기능 연동 가능)

### D. 커뮤니티 기능 최소 세트

* Like(캐릭터/시나리오/조합)
* Bookmark(저장)
* Remix/Fork(기존 콘텐츠 기반으로 새 콘텐츠 생성: “원본id + 변경점”)
* Report(신고)
* View count(조회수)

---

## 4) DB/스토리지 설계: “본문 JSON은 그대로, 메타만 DB”

가장 싸게 가려면 아래 “2층 구조”가 유리합니다.

### (1) DB에는 “메타데이터 + 권한 + 인덱싱용 필드”

* `characters` 테이블: id, ownerId, name, tagline, description, tags, visibility, createdAt, updatedAt, version, sourceCharacterId(리믹스), status(published/draft), safetyFlags
* `character_versions`(선택): characterId, version, bodyJson(또는 bodyPath), createdAt
* `scenarios` / `scenario_versions`도 동일

### (2) 본문(JSON)은 두 가지 중 택1

* **옵션 A (초기 MVP 추천): DB에 JSON 그대로 저장**

  * 장점: 구현 빠름
  * 단점: JSON이 커지면 관리가 번거로움
* **옵션 B(운영형): 파일/오브젝트 스토리지에 JSON 저장 + DB에 path/hash**

  * 장점: 버전/롤백/캐시 쉬움
  * 단점: 초기 구현이 약간 더 필요

**추천**: MVP는 A로 시작 → 트래픽/버전 필요해지면 B로 이동.

---

## 5) API 설계(최소 MVP 기준)

### Auth

* `POST /auth/signup`, `POST /auth/login`, `GET /me`

### Character

* `POST /characters` (draft 생성)
* `PUT /characters/:id` (편집)
* `POST /characters/:id/publish`
* `GET /characters/:id`
* `GET /characters?query=&tags=&sort=trending|new|top`

### Scenario

* 위와 동일

### Experience(조합 공유)

* `POST /experiences` (characterId + scenarioId + 옵션)
* `GET /experiences?sort=...`
* `GET /experiences/:id`

### Conversation

* `POST /conversations` (characterId + scenarioId/experienceId)
* `POST /conversations/:id/messages` (사용자 메시지 → LLM 응답 생성)
* `GET /conversations/:id`
* `GET /me/conversations`

### Social

* `POST /likes` (targetType, targetId)
* `POST /bookmarks`
* `POST /reports`

---

## 6) 프론트 IA/UX: Character.ai 핵심 화면을 “3단 탭”으로 단순화

기존이 “훈련/시나리오 중심”이라면, 커뮤니티형은 탐색이 핵심입니다.

### 탭 1) Explore

* 상단 검색바
* 필터(태그/언어/성인/길이/난이도)
* 섹션: Trending Characters / Trending Scenarios / Trending Experiences
* 카드 구성: 썸네일 + 제목 + 태그 + 좋아요 + 사용횟수

### 탭 2) Create

* “캐릭터 만들기”
* “시나리오 만들기”
* “조합(Experience) 만들기”
* Draft 관리

### 탭 3) Library (My)

* 내가 만든 캐릭터/시나리오
* 북마크
* 내 대화 목록

### 상세 페이지 공통

* 캐릭터(또는 시나리오) 상세: 설명/태그/버전/리믹스 버튼/신고 버튼
* “Start Chat” 버튼
* (조합이 있으면) 추천 조합 리스트

---

## 7) 운영/모더레이션: 초기에 “자동화 욕심내지 말고” 최소만

돈 안 들이려면 처음부터 강한 자동 모더레이션을 구축하지 말고:

1. **Public 공개는 “publish” 시 체크리스트 + 약관 동의**
2. 신고(Report) 누적 시 자동 비공개(soft hide)
3. 관리자(당신)용 간단한 어드민 화면: 신고 목록/조치(숨김/복구/밴)
4. 검색 노출은 “public + 안전”만

---

## 8) 단계별 로드맵 (가장 싸게 MVP → 확장)

### Phase 0 (1~2일): 기존 코드 “콘텐츠 DB화” 준비

* personas/scenarios를 DB에 import (seed 스크립트)
* 기존 대화 엔진이 “파일 읽기”라면 “DB fetch”로 교체
* 공개범위/ownerId만 추가

### Phase 1 (MVP, 1~2주): UGC 생성/공유/탐색 + 대화

* 캐릭터/시나리오 CRUD + publish/unlisted
* Explore(검색/태그/정렬 new/top)
* Start Chat(캐릭터 단독 또는 시나리오 선택)
* Like/Bookmark

### Phase 2 (2~4주): “리믹스 + 조합 공유(Experience)”

* Remix 버튼(원본 기반 복제)
* Experience 공유(캐릭터×시나리오 템플릿)
* Trending 산정(최근 7일 like/view/chat 가중치)

### Phase 3: 수익/스케일(필요할 때만)

* 유료: 프리미엄 캐릭터(비공개 공유), 고급 음성(TTS), 고급 모델 선택
* 캐시/검색 인덱스(Elastic/Meilisearch 등) 도입은 트래픽 생긴 후

---

## 9) 지금 레포에서 “바로 활용” 가능한 자산(재사용 포인트)

* 이미 `personas/`, `scenarios/` 디렉토리가 있고, 서비스 목적도 “시나리오 기반 대화”로 정리되어 있어 **UGC로 확장하기 좋습니다.** ([GitHub][1])
* 난이도(4단계)와 감정 분석 같은 요소는 Character.ai에는 없는 차별점이므로, **Scenario 옵션으로 남겨서 “시나리오 마켓”의 품질 지표**로 쓰면 됩니다. ([GitHub][1])

---

## 10) 당신에게 가장 중요한 결정 2개(여기서 비용이 갈림)

1. **“캐릭터만으로 채팅”을 허용할지, 아니면 “시나리오 선택을 강제”할지**

   * 추천: 둘 다.
   * 기본은 캐릭터 단독 시작(진입장벽↓), 고급은 시나리오 선택(차별점↑)

2. **본문 JSON 저장 위치(DB vs 파일/오브젝트)**

   * MVP는 DB에 저장(빠름) → 운영형은 오브젝트로 이전(안정적)

---

원하면 다음 단계로, 제가 **(1) DB 테이블 초안(Drizzle 기준) + (2) REST 엔드포인트 스펙 + (3) 화면별 컴포넌트/라우팅 구조**를 “당장 구현 가능한 수준”으로 더 구체화해서 드리겠습니다. (코드를 실제로 어떤 스택(Express/Vite/Drizzle 등)으로 묶어놨는지에 맞춰서, 파일 단위까지 쪼개서 제안 가능합니다.)

[1]: https://github.com/Rexmeta/metabeing "GitHub - Rexmeta/metabeing"
